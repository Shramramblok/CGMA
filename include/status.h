#ifndef CGMA_STATUS_H
#define CGMA_STATUS_H

typedef unsigned int CGMAStatus;

// Successful 32nd bit
#define CGMA_SUCCESS 0b00000000000000000000000000000000
#define CGMA_FAIL    0b10000000000000000000000000000000
#define CGMA_SUCCESSFUL_MASK CGMA_FAIL

// Boolean 31st bit
#define CGMA_TRUE  0b01000000000000000000000000000000
#define CGMA_FALSE 0b00000000000000000000000000000000
#define CGMA_BOOLEAN_MASK CGMA_TRUE

// Common Errors 30th - 27th
#define CGMA_NO_COMMON_ERROR    0b00000000000000000000000000000000
#define CGMA_GOT_NULL_ERROR     0b00000100000000000000000000000000
#define CGMA_ALLOCATION_ERROR   0b00001000000000000000000000000000
#define CGMA_COMMON_ERRORS_MASK 0b00111100000000000000000000000000


#define CGMA_STATUS_MODULE 0b00000000000000000000000000000000
#define CGMA_VECTOR_MODULE 0b00000000000000000010000000000000
#define CGMA_ARRAY_MODULE  0b00000000000000000100000000000000
#define CGMA_MODULE_MASK   0b00000011111111111110000000000000

#define CGMA_NO_SPECIFIC_ERROR 0b00000000000000000000000000000000
#define CGMA_SPECIFIC_ERRORS_MASK 0b00000000000000000001111111111111



#define CGMA_FAILED(status) ((status) & SUCCESSFUL_MASK)
#define CGMA_SUCCEEDED(status) (!FAILED(status))

#define CGMA_TRUTHY(status) ((status) & BOOLEAN_MASK)
#define CGMA_FALSY(status) (!TRUTHY(status))

#define CGMA_TRY(status) \
{ \
    const Status st = status; \
    if (FAILED(st)) return st; \
}

#endif //CGMA_STATUS_H
